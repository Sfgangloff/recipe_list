{"ast":null,"code":"var _jsxFileName = \"/home/silvere/Desktop/Apps/recipelist/src/editable.js\";\nimport { relativeTimeRounding } from 'moment';\nimport React, { Component } from 'react';\nimport { doc, addDoc, updateDoc } from \"firebase/firestore\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nclass Comment extends Component {\n  constructor(props) {\n    super(props);\n    this.updateComponentValue = async e => {\n      if (e.key == \"Enter\") {\n        this.setState({\n          isInEditMode: false,\n          value: this.refs.theTextInput.value\n        });\n        const recipe = await getDoc(this.state.recipeRef);\n        const comments = recipe.data().comments;\n        comments[this.state.rank] = this.state.value;\n        await updateDoc(this.state.recipeRef, {\n          comments: comments\n        });\n      }\n    };\n    if (this.props.value != \"\") {\n      this.state = {\n        value: this.props.value,\n        isInEditMode: false,\n        docId: this.props.recipeId,\n        ref: this.props.recipeRef,\n        rank: this.props.commentRank\n      };\n    } else {\n      this.state = {\n        value: \"###################################################\",\n        isInEditMode: false,\n        docId: this.props.recipeId,\n        ref: this.props.recipeRef,\n        rank: this.props.commentRank\n      };\n    }\n    this.changeEditMode = this.changeEditMode.bind(this);\n    this.renderEditView = this.renderEditView.bind(this);\n    this.renderDefaultView = this.renderDefaultView.bind(this);\n    this.updateComponentValue = this.updateComponentValue.bind(this);\n  }\n  changeEditMode() {\n    this.setState({\n      isInEditMode: !this.state.isInEditMode\n    });\n  }\n  renderEditView() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        defaultValue: this.state.value,\n        ref: \"theTextInput\",\n        onKeyPress: this.updateComponentValue\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 10\n    }, this);\n  }\n  renderDefaultView() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      onDoubleClick: this.changeEditMode,\n      children: this.state.value\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 10\n    }, this);\n  }\n  render() {\n    return this.state.isInEditMode ? this.renderEditView() : this.renderDefaultView();\n  }\n}\nexport default Comment;","map":{"version":3,"names":["relativeTimeRounding","React","Component","doc","addDoc","updateDoc","Comment","constructor","props","updateComponentValue","e","key","setState","isInEditMode","value","refs","theTextInput","recipe","getDoc","state","recipeRef","comments","data","rank","docId","recipeId","ref","commentRank","changeEditMode","bind","renderEditView","renderDefaultView","render"],"sources":["/home/silvere/Desktop/Apps/recipelist/src/editable.js"],"sourcesContent":["import { relativeTimeRounding } from 'moment';\nimport React, { Component } from 'react';\nimport {doc, addDoc, updateDoc} from \"firebase/firestore\"\n\n\nclass Comment extends Component {\n\n  constructor(props) {\n    super(props)\n\n    if (this.props.value!=\"\") {\n      this.state = {\n        value:this.props.value, \n        isInEditMode:false,\n        docId:this.props.recipeId,\n        ref:this.props.recipeRef,\n        rank:this.props.commentRank\n      }\n    } else {\n      this.state = {\n        value:\"###################################################\", \n        isInEditMode:false,\n        docId:this.props.recipeId,\n        ref:this.props.recipeRef,\n        rank:this.props.commentRank\n      }\n    }\n\n    this.changeEditMode = this.changeEditMode.bind(this)\n    this.renderEditView = this.renderEditView.bind(this)\n    this.renderDefaultView = this.renderDefaultView.bind(this)\n    this.updateComponentValue = this.updateComponentValue.bind(this)\n    \n  \n}\n\nchangeEditMode() {\n  this.setState(\n    {\n      isInEditMode:!this.state.isInEditMode\n    }\n  )\n}\n\nupdateComponentValue = async e => {\n  if (e.key == \"Enter\") {\n    this.setState({\n    isInEditMode:false,\n    value: this.refs.theTextInput.value\n  })\n  \n  const recipe = await getDoc(this.state.recipeRef)\n  const comments = recipe.data().comments\n    comments[this.state.rank] = this.state.value\n    await updateDoc(this.state.recipeRef,{comments:comments});\n  }\n}\n\nrenderEditView() {\n\n  return <div>\n    <input type=\"text\" \n           defaultValue={this.state.value}\n           ref=\"theTextInput\" onKeyPress={this.updateComponentValue}/>\n  </div>\n}\n\nrenderDefaultView() {\n  return <div onDoubleClick = {this.changeEditMode}> \n  {this.state.value}\n</div>\n}\n\n  render() {\n    return this.state.isInEditMode ? \n     this.renderEditView() : this.renderDefaultView()\n    \n  }\n}\n\nexport default Comment;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}