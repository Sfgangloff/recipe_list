{"ast":null,"code":"var _jsxFileName = \"/home/silvere/Desktop/Apps/recipelist/src/editable.js\";\nimport { db } from \"./firebase.config\";\nimport { relativeTimeRounding } from 'moment';\nimport React, { Component, createRef } from 'react';\nimport { collection, doc, addDoc, getDoc, updateDoc } from \"firebase/firestore\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nclass Comment extends Component {\n  constructor(props) {\n    super(props);\n    this.getDocData = async () => {\n      docRef = doc(db, \"comments\", this.state.id);\n      docSnap = await getDoc(this.docRef);\n      return docSnap.data().text;\n    };\n    this.state = {\n      id: this.props.id,\n      isInEditMode: false\n    };\n    this.changeEditMode = this.changeEditMode.bind(this);\n    this.renderEditView = this.renderEditView.bind(this);\n    this.renderDefaultView = this.renderDefaultView.bind(this);\n    this.updateComponentValue = this.updateComponentValue.bind(this);\n  }\n  changeEditMode() {\n    this.setState({\n      isInEditMode: !this.state.isInEditMode\n    });\n  }\n  updateComponentValue(e) {\n    const commentsCollectionRef = collection(db, \"comments\");\n    if (e.key === \"Enter\") {\n      commentsCollectionRef.doc(this.state.id).update({\n        text: this.refs.theTextInput.value\n      });\n      this.setState({\n        isInEditMode: false\n      });\n    }\n  }\n  renderEditView() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        defaultValue: \"\",\n        ref: \"theTextInput\",\n        onKeyPress: this.updateComponentValue\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 10\n    }, this);\n  }\n  renderDefaultView() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      onDoubleClick: this.changeEditMode\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 10\n    }, this);\n  }\n  render() {\n    return this.state.isInEditMode ? this.renderEditView() : this.renderDefaultView();\n  }\n}\nexport default Comment;","map":{"version":3,"names":["db","relativeTimeRounding","React","Component","createRef","collection","doc","addDoc","getDoc","updateDoc","Comment","constructor","props","getDocData","docRef","state","id","docSnap","data","text","isInEditMode","changeEditMode","bind","renderEditView","renderDefaultView","updateComponentValue","setState","e","commentsCollectionRef","key","update","refs","theTextInput","value","render"],"sources":["/home/silvere/Desktop/Apps/recipelist/src/editable.js"],"sourcesContent":["import { db } from \"./firebase.config\"\nimport { relativeTimeRounding } from 'moment';\nimport React, { Component, createRef } from 'react';\nimport {collection, doc, addDoc, getDoc, updateDoc} from \"firebase/firestore\"\n\n\nclass Comment extends Component {\n\n  constructor(props) {\n    super(props)\n\n    this.state = {\n        id:this.props.id, \n        isInEditMode:false\n      }\n\n\n    this.changeEditMode = this.changeEditMode.bind(this)\n    this.renderEditView = this.renderEditView.bind(this)\n    this.renderDefaultView = this.renderDefaultView.bind(this)\n    this.updateComponentValue = this.updateComponentValue.bind(this)\n    \n  \n}\n\n\nchangeEditMode() {\n  this.setState(\n    {\n      isInEditMode:!this.state.isInEditMode\n    }\n  )\n}\n\n\n\nupdateComponentValue(e) {\n  const commentsCollectionRef = collection(db,\"comments\")\n  if (e.key === \"Enter\") {\n    commentsCollectionRef.doc(this.state.id).update({text:this.refs.theTextInput.value});\n    this.setState({\n    isInEditMode:false\n  })\n    \n  }\n}\n\ngetDocData = async () => {\n  docRef = doc(db, \"comments\", this.state.id)\n  docSnap = await getDoc(this.docRef)\n  return docSnap.data().text\n}\n\nrenderEditView() {\n\n  return <div>\n    <input type=\"text\" \n           defaultValue={\"\"}\n           ref=\"theTextInput\" onKeyPress={this.updateComponentValue}/>\n  </div>\n}\n\nrenderDefaultView() {\n  return <div onDoubleClick = {this.changeEditMode}> \n  {}\n</div>\n}\n\n  render() {\n    return this.state.isInEditMode ? \n     this.renderEditView() : this.renderDefaultView()\n    \n  }\n}\n\nexport default Comment;"],"mappings":";AAAA,SAASA,EAAE,QAAQ,mBAAmB;AACtC,SAASC,oBAAoB,QAAQ,QAAQ;AAC7C,OAAOC,KAAK,IAAIC,SAAS,EAAEC,SAAS,QAAQ,OAAO;AACnD,SAAQC,UAAU,EAAEC,GAAG,EAAEC,MAAM,EAAEC,MAAM,EAAEC,SAAS,QAAO,oBAAoB;AAAA;AAG7E,MAAMC,OAAO,SAASP,SAAS,CAAC;EAE9BQ,WAAW,CAACC,KAAK,EAAE;IACjB,KAAK,CAACA,KAAK,CAAC;IAAA,KAsChBC,UAAU,GAAG,YAAY;MACvBC,MAAM,GAAGR,GAAG,CAACN,EAAE,EAAE,UAAU,EAAE,IAAI,CAACe,KAAK,CAACC,EAAE,CAAC;MAC3CC,OAAO,GAAG,MAAMT,MAAM,CAAC,IAAI,CAACM,MAAM,CAAC;MACnC,OAAOG,OAAO,CAACC,IAAI,EAAE,CAACC,IAAI;IAC5B,CAAC;IAxCG,IAAI,CAACJ,KAAK,GAAG;MACTC,EAAE,EAAC,IAAI,CAACJ,KAAK,CAACI,EAAE;MAChBI,YAAY,EAAC;IACf,CAAC;IAGH,IAAI,CAACC,cAAc,GAAG,IAAI,CAACA,cAAc,CAACC,IAAI,CAAC,IAAI,CAAC;IACpD,IAAI,CAACC,cAAc,GAAG,IAAI,CAACA,cAAc,CAACD,IAAI,CAAC,IAAI,CAAC;IACpD,IAAI,CAACE,iBAAiB,GAAG,IAAI,CAACA,iBAAiB,CAACF,IAAI,CAAC,IAAI,CAAC;IAC1D,IAAI,CAACG,oBAAoB,GAAG,IAAI,CAACA,oBAAoB,CAACH,IAAI,CAAC,IAAI,CAAC;EAGpE;EAGAD,cAAc,GAAG;IACf,IAAI,CAACK,QAAQ,CACX;MACEN,YAAY,EAAC,CAAC,IAAI,CAACL,KAAK,CAACK;IAC3B,CAAC,CACF;EACH;EAIAK,oBAAoB,CAACE,CAAC,EAAE;IACtB,MAAMC,qBAAqB,GAAGvB,UAAU,CAACL,EAAE,EAAC,UAAU,CAAC;IACvD,IAAI2B,CAAC,CAACE,GAAG,KAAK,OAAO,EAAE;MACrBD,qBAAqB,CAACtB,GAAG,CAAC,IAAI,CAACS,KAAK,CAACC,EAAE,CAAC,CAACc,MAAM,CAAC;QAACX,IAAI,EAAC,IAAI,CAACY,IAAI,CAACC,YAAY,CAACC;MAAK,CAAC,CAAC;MACpF,IAAI,CAACP,QAAQ,CAAC;QACdN,YAAY,EAAC;MACf,CAAC,CAAC;IAEF;EACF;EAQAG,cAAc,GAAG;IAEf,oBAAO;MAAA,uBACL;QAAO,IAAI,EAAC,MAAM;QACX,YAAY,EAAE,EAAG;QACjB,GAAG,EAAC,cAAc;QAAC,UAAU,EAAE,IAAI,CAACE;MAAqB;QAAA;QAAA;QAAA;MAAA;IAAE;MAAA;MAAA;MAAA;IAAA,QAC9D;EACR;EAEAD,iBAAiB,GAAG;IAClB,oBAAO;MAAK,aAAa,EAAI,IAAI,CAACH;IAAe;MAAA;MAAA;MAAA;IAAA,QAE7C;EACN;EAEEa,MAAM,GAAG;IACP,OAAO,IAAI,CAACnB,KAAK,CAACK,YAAY,GAC7B,IAAI,CAACG,cAAc,EAAE,GAAG,IAAI,CAACC,iBAAiB,EAAE;EAEnD;AACF;AAEA,eAAed,OAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}