{"ast":null,"code":"var _jsxFileName = \"/home/silvere/Desktop/Apps/recipelist/src/editablelist.js\";\nimport { db } from \"./firebase.config\";\nimport { relativeTimeRounding } from 'moment';\nimport React, { Component, createRef, useState } from 'react';\nimport { collection, onSnapshot, doc, addDoc, getDoc, setDoc, updateDoc, deleteDoc } from \"firebase/firestore\";\nimport { v4 } from 'uuid';\nimport Comment from './editable.js';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nclass CommentList extends Component {\n  constructor(props) {\n    super(props);\n    const commentsCollectionRef = collection(db, \"comments\");\n    const [comments, setComments] = useState([]);\n    onSnapshot(commentsCollectionRef, snapshot => {\n      setComments(snapshot.docs.map(doc => {\n        return {\n          id: doc.id,\n          ...doc.data()\n        };\n      }));\n    });\n    this.state = {\n      recipeId: this.props.recipeId,\n      comments: this.props.comments\n    };\n    this.refreshList = this.refreshList.bind(this);\n  }\n  refreshList() {\n    this.setState({\n      comments: []\n    });\n  }\n  render() {\n    console.log(this.comments);\n    return /*#__PURE__*/_jsxDEV(\"ol\", {\n      children: this.comments.sort((a, b) => a.timestamp < b.timestamp ? -1 : 1).map((comment, i) => /*#__PURE__*/_jsxDEV(\"li\", {\n        children: [\" \", comment.recipeId === this.recipeId ? /*#__PURE__*/_jsxDEV(Comment, {\n          id: comment.id,\n          text: comment.text,\n          recipeId: comment.recipeId,\n          refreshList: this.refreshList\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 69\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 179\n        }, this), \" \"]\n      }, i, true, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 16\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 14\n    }, this);\n  }\n}\nexport default CommentList;","map":{"version":3,"names":["db","relativeTimeRounding","React","Component","createRef","useState","collection","onSnapshot","doc","addDoc","getDoc","setDoc","updateDoc","deleteDoc","v4","Comment","CommentList","constructor","props","commentsCollectionRef","comments","setComments","snapshot","docs","map","id","data","state","recipeId","refreshList","bind","setState","render","console","log","sort","a","b","timestamp","comment","i","text"],"sources":["/home/silvere/Desktop/Apps/recipelist/src/editablelist.js"],"sourcesContent":["import { db } from \"./firebase.config\"\nimport { relativeTimeRounding } from 'moment';\nimport React, { Component, createRef, useState } from 'react';\nimport {collection, onSnapshot, doc, addDoc, getDoc, setDoc, updateDoc, deleteDoc} from \"firebase/firestore\"\nimport { v4 } from 'uuid';\n\nimport Comment from './editable.js';\n\nclass CommentList extends Component {\n\n  constructor(props) {\n    super(props)\n\n    const commentsCollectionRef = collection(db,\"comments\")\n    const [comments, setComments] = useState([])\n\n    onSnapshot(commentsCollectionRef, snapshot => {\n      setComments(snapshot.docs.map(doc => {\n        return {\n          id:doc.id,\n          ...doc.data()\n        }\n      }))\n    })\n\n    this.state = {\n        recipeId:this.props.recipeId,\n        comments:this.props.comments\n      }\n\n\n    this.refreshList = this.refreshList.bind(this)\n  \n}\n\n\nrefreshList() {\n  this.setState(\n    {\n      comments:[]\n    }\n  )\n}\n\n\n\n\n  render() {\n    console.log(this.comments)\n     return  <ol>{this.comments.sort((a, b) =>\n      a.timestamp < b.timestamp ? -1 : 1,\n      ).map((comment,i) => (\n               <li key={i}> {(comment.recipeId === this.recipeId) ? <Comment id={comment.id} text={comment.text} recipeId={comment.recipeId} refreshList={this.refreshList}/>   : <div></div>} </li>\n                     ))}\n           </ol>\n    \n  }\n}\n\nexport default CommentList;"],"mappings":";AAAA,SAASA,EAAE,QAAQ,mBAAmB;AACtC,SAASC,oBAAoB,QAAQ,QAAQ;AAC7C,OAAOC,KAAK,IAAIC,SAAS,EAAEC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAC7D,SAAQC,UAAU,EAAEC,UAAU,EAAEC,GAAG,EAAEC,MAAM,EAAEC,MAAM,EAAEC,MAAM,EAAEC,SAAS,EAAEC,SAAS,QAAO,oBAAoB;AAC5G,SAASC,EAAE,QAAQ,MAAM;AAEzB,OAAOC,OAAO,MAAM,eAAe;AAAC;AAEpC,MAAMC,WAAW,SAASb,SAAS,CAAC;EAElCc,WAAW,CAACC,KAAK,EAAE;IACjB,KAAK,CAACA,KAAK,CAAC;IAEZ,MAAMC,qBAAqB,GAAGb,UAAU,CAACN,EAAE,EAAC,UAAU,CAAC;IACvD,MAAM,CAACoB,QAAQ,EAAEC,WAAW,CAAC,GAAGhB,QAAQ,CAAC,EAAE,CAAC;IAE5CE,UAAU,CAACY,qBAAqB,EAAEG,QAAQ,IAAI;MAC5CD,WAAW,CAACC,QAAQ,CAACC,IAAI,CAACC,GAAG,CAAChB,GAAG,IAAI;QACnC,OAAO;UACLiB,EAAE,EAACjB,GAAG,CAACiB,EAAE;UACT,GAAGjB,GAAG,CAACkB,IAAI;QACb,CAAC;MACH,CAAC,CAAC,CAAC;IACL,CAAC,CAAC;IAEF,IAAI,CAACC,KAAK,GAAG;MACTC,QAAQ,EAAC,IAAI,CAACV,KAAK,CAACU,QAAQ;MAC5BR,QAAQ,EAAC,IAAI,CAACF,KAAK,CAACE;IACtB,CAAC;IAGH,IAAI,CAACS,WAAW,GAAG,IAAI,CAACA,WAAW,CAACC,IAAI,CAAC,IAAI,CAAC;EAElD;EAGAD,WAAW,GAAG;IACZ,IAAI,CAACE,QAAQ,CACX;MACEX,QAAQ,EAAC;IACX,CAAC,CACF;EACH;EAKEY,MAAM,GAAG;IACPC,OAAO,CAACC,GAAG,CAAC,IAAI,CAACd,QAAQ,CAAC;IACzB,oBAAQ;MAAA,UAAK,IAAI,CAACA,QAAQ,CAACe,IAAI,CAAC,CAACC,CAAC,EAAEC,CAAC,KACpCD,CAAC,CAACE,SAAS,GAAGD,CAAC,CAACC,SAAS,GAAG,CAAC,CAAC,GAAG,CAAC,CACjC,CAACd,GAAG,CAAC,CAACe,OAAO,EAACC,CAAC,kBACP;QAAA,gBAAeD,OAAO,CAACX,QAAQ,KAAK,IAAI,CAACA,QAAQ,gBAAI,QAAC,OAAO;UAAC,EAAE,EAAEW,OAAO,CAACd,EAAG;UAAC,IAAI,EAAEc,OAAO,CAACE,IAAK;UAAC,QAAQ,EAAEF,OAAO,CAACX,QAAS;UAAC,WAAW,EAAE,IAAI,CAACC;QAAY;UAAA;UAAA;UAAA;QAAA,QAAE,gBAAK;UAAA;UAAA;UAAA;QAAA,QAAW;MAAA,GAArKW,CAAC;QAAA;QAAA;QAAA;MAAA,QACH;IAAC;MAAA;MAAA;MAAA;IAAA,QACP;EAEd;AACF;AAEA,eAAexB,WAAW"},"metadata":{},"sourceType":"module","externalDependencies":[]}