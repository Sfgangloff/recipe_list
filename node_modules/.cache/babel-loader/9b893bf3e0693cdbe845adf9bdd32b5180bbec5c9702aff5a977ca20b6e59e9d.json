{"ast":null,"code":"var _jsxFileName = \"/home/silvere/Desktop/Apps/recipelist/src/editablelist.js\";\nimport { db } from \"./firebase.config\";\nimport { relativeTimeRounding } from 'moment';\nimport React, { Component, createRef } from 'react';\nimport { collection, doc, addDoc, getDoc, setDoc, updateDoc, deleteDoc } from \"firebase/firestore\";\nimport { v4 } from 'uuid';\nimport Comment from './editable.js';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nclass CommentList extends Component {\n  constructor(props) {\n    super(props);\n    this.addComment = async text => {\n      var x = v4();\n      const timestamp = Date.now();\n      const comments = this.state.comments;\n      comments.push({\n        id: x,\n        recipeId: this.state.recipeId,\n        text: text,\n        timestamp: timestamp\n      });\n      this.setState({\n        comments: comments\n      });\n      await setDoc(doc(db, \"comments\", x), {\n        recipeId: this.state.recipeId,\n        text: text,\n        timestamp: timestamp\n      });\n    };\n    this.removeComment = async id => {\n      const comments = this.state.comments;\n      for (var i = 0; i < comments.length; i++) {\n        if (comments.id === id) {\n          comments.splice(i, 1);\n        }\n      }\n      this.setState({\n        comments: comments\n      });\n      await deleteDoc(doc(db, \"comments\", id));\n    };\n    this.state = {\n      recipeId: this.props.recipeId,\n      comments: this.props.comments\n    };\n    this.addComment = this.addComment.bind(this);\n    this.removeComment = this.removeComment.bind(this);\n  }\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"ol\", {\n      children: this.state.comments.sort((a, b) => a.timestamp < b.timestamp ? -1 : 1).map((comment, i) => /*#__PURE__*/_jsxDEV(\"li\", {\n        children: [\" \", comment.recipeId === this.state.recipeId ? /*#__PURE__*/_jsxDEV(Comment, {\n          id: comment.id,\n          text: comment.text,\n          recipeId: comment.recipeId,\n          addComment: this.addComment,\n          removeComment: this.removeComment\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 16\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 66\n        }, this), \" \"]\n      }, i, true, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 16\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 14\n    }, this);\n  }\n}\nexport default CommentList;","map":{"version":3,"names":["db","relativeTimeRounding","React","Component","createRef","collection","doc","addDoc","getDoc","setDoc","updateDoc","deleteDoc","v4","Comment","CommentList","constructor","props","addComment","text","x","timestamp","Date","now","comments","state","push","id","recipeId","setState","removeComment","i","length","splice","bind","render","sort","a","b","map","comment"],"sources":["/home/silvere/Desktop/Apps/recipelist/src/editablelist.js"],"sourcesContent":["import { db } from \"./firebase.config\"\nimport { relativeTimeRounding } from 'moment';\nimport React, { Component, createRef } from 'react';\nimport {collection, doc, addDoc, getDoc, setDoc, updateDoc, deleteDoc} from \"firebase/firestore\"\nimport { v4 } from 'uuid';\n\nimport Comment from './editable.js';\n\nclass CommentList extends Component {\n\n  constructor(props) {\n    super(props)\n    this.state = {\n        recipeId:this.props.recipeId,\n        comments:this.props.comments\n      }\n\n\n    this.addComment = this.addComment.bind(this)\n    this.removeComment = this.removeComment.bind(this)\n  \n}\n\n\naddComment= async (text) => {\n  var x = v4();\n  const timestamp = Date.now()\n  const comments = this.state.comments\n  comments.push({id:x,recipeId:this.state.recipeId,text:text,timestamp:timestamp})\n  this.setState({comments:comments})\n  await setDoc(doc(db, \"comments\", x),{recipeId:this.state.recipeId,text:text,timestamp:timestamp})\n  \n}\n\nremoveComment = async (id) => {\n  const comments = this.state.comments\n  for(var i = 0; i < comments.length; i++){ \n    \n    if ( comments.id === id) { \n\n        comments.splice(i, 1); \n    }\n  }\n  this.setState({comments:comments})\n    await deleteDoc(doc(db,\"comments\",id))\n  }\n\n\n\n  render() {\n     return  <ol>{this.state.comments.sort((a, b) =>\n      a.timestamp < b.timestamp ? -1 : 1,\n      ).map((comment,i) => (\n               <li key={i}> {(comment.recipeId === this.state.recipeId) ? \n               <Comment id={comment.id} \n                        text={comment.text} \n                        recipeId={comment.recipeId} \n                        addComment={this.addComment} \n                        removeComment={this.removeComment}/>   : <div></div>} </li>\n                     ))}\n           </ol>\n    \n  }\n}\n\nexport default CommentList;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}