{"ast":null,"code":"var _jsxFileName = \"/home/silvere/Desktop/Apps/recipelist/src/editable.js\";\nimport { db } from \"./firebase.config\";\nimport { relativeTimeRounding } from 'moment';\nimport React, { Component, createRef } from 'react';\nimport { collection, doc, addDoc, getDoc, setDoc, updateDoc, deleteDoc } from \"firebase/firestore\";\nimport { v4 } from 'uuid';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nclass Comment extends Component {\n  constructor(props) {\n    super(props);\n    this.updateComponentValue = async e => {\n      const commentsCollectionRef = collection(db, \"comments\");\n      const commentRef = doc(db, \"comments\", this.state.id);\n      const initialValue = this.state.text;\n      const newValue = this.refs.theTextInput.value;\n      if (e.key === \"Enter\") {\n        if (initialValue === \"############################################################\") {\n          if (newValue !== initialValue && newValue !== \"\") {\n            var x = v4();\n            await setDoc(doc(db, \"comments\", x), {\n              recipeId: this.state.recipeId,\n              text: newValue\n            });\n          }\n        } else {\n          if (newValue !== \"\") {\n            const timestamp = Date.now();\n            this.setState({\n              text: newValue\n            });\n            await updateDoc(doc(db, \"comments\", this.state.id), {\n              text: newValue\n            });\n          } else {\n            await deleteDoc(doc(db, \"comments\", this.state.id));\n          }\n        }\n        this.setState({\n          isInEditMode: false\n        });\n      }\n    };\n    this.state = {\n      id: this.props.id,\n      text: this.props.text,\n      recipeId: this.props.recipeId,\n      isInEditMode: false\n    };\n    this.changeEditMode = this.changeEditMode.bind(this);\n    this.renderEditView = this.renderEditView.bind(this);\n    this.renderDefaultView = this.renderDefaultView.bind(this);\n    this.updateComponentValue = this.updateComponentValue.bind(this);\n  }\n  changeEditMode() {\n    this.setState({\n      isInEditMode: !this.state.isInEditMode\n    });\n  }\n  renderEditView() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        defaultValue: this.state.text,\n        ref: \"theTextInput\",\n        onKeyPress: this.updateComponentValue\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 10\n    }, this);\n  }\n  renderDefaultView() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      onDoubleClick: this.changeEditMode,\n      children: this.state.text\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 10\n    }, this);\n  }\n  render() {\n    return this.state.isInEditMode ? this.renderEditView() : this.renderDefaultView();\n  }\n}\nexport default Comment;","map":{"version":3,"names":["db","relativeTimeRounding","React","Component","createRef","collection","doc","addDoc","getDoc","setDoc","updateDoc","deleteDoc","v4","Comment","constructor","props","updateComponentValue","e","commentsCollectionRef","commentRef","state","id","initialValue","text","newValue","refs","theTextInput","value","key","x","recipeId","timestamp","Date","now","setState","isInEditMode","changeEditMode","bind","renderEditView","renderDefaultView","render"],"sources":["/home/silvere/Desktop/Apps/recipelist/src/editable.js"],"sourcesContent":["import { db } from \"./firebase.config\"\nimport { relativeTimeRounding } from 'moment';\nimport React, { Component, createRef } from 'react';\nimport {collection, doc, addDoc, getDoc, setDoc, updateDoc, deleteDoc} from \"firebase/firestore\"\nimport { v4 } from 'uuid';\n\nclass Comment extends Component {\n\n  constructor(props) {\n    super(props)\n\n    this.state = {\n        id:this.props.id,\n        text:this.props.text,\n        recipeId:this.props.recipeId,\n        isInEditMode:false\n      }\n\n\n    this.changeEditMode = this.changeEditMode.bind(this)\n    this.renderEditView = this.renderEditView.bind(this)\n    this.renderDefaultView = this.renderDefaultView.bind(this)\n    this.updateComponentValue = this.updateComponentValue.bind(this)\n  \n}\n\n\nchangeEditMode() {\n  this.setState(\n    {\n      isInEditMode:!this.state.isInEditMode\n    }\n  )\n}\n\n\n\nupdateComponentValue = async (e) => {\n  const commentsCollectionRef = collection(db,\"comments\")\n  const commentRef = doc(db,\"comments\",this.state.id)\n  const initialValue = this.state.text\n  const newValue = this.refs.theTextInput.value\n  if (e.key === \"Enter\") {\n    if (initialValue === \"############################################################\") {\n      if (newValue !== initialValue && newValue !==\"\") {\n        var x = v4();\n        await setDoc(doc(db, \"comments\", x),{recipeId:this.state.recipeId,text:newValue})\n      }\n    } \n    else {\n      if (newValue !== \"\") {\n        const timestamp = Date.now()\n        this.setState({text:newValue})\n        await updateDoc(doc(db, \"comments\", this.state.id),{text:newValue})\n      } else {\n        await deleteDoc(doc(db,\"comments\",this.state.id))\n      }\n      }\n    this.setState({\n    isInEditMode:false\n  })\n    \n  }\n}\n\n\nrenderEditView() {\n  return <div>\n    <input type=\"text\" \n           defaultValue={this.state.text}\n           ref=\"theTextInput\" onKeyPress={this.updateComponentValue}/>\n  </div>\n}\n\nrenderDefaultView() {\n  return <div onDoubleClick = {this.changeEditMode}> \n  {this.state.text}\n</div>\n}\n\n  render() {\n    return this.state.isInEditMode ? \n     this.renderEditView() : this.renderDefaultView()\n    \n  }\n}\n\nexport default Comment;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}